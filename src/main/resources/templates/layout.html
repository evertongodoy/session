<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:replace="${title}">Título</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body th:attr="data-session-timeout=${sessionTimeout}">
<div class="container">
    <header>
        <h2 th:replace="${header}">Bem-vindo</h2>
    </header>

    <!-- Tempo restante -->
    <p>Tempo restante para expiração da sessão: <span id="timeoutCountdown"></span></p>

    <!-- Menu Horizontal -->
    <nav class="menu">
        <a th:href="@{/pagina1}">Página 1</a>
        <a th:href="@{/pagina2}">Página 2</a>
        <a th:href="@{/pagina3}">Página 3</a>
    </nav>

    <!-- Conteúdo Principal -->
    <main th:replace="${content}"></main>

    <!-- Botão de Logout -->
    <form th:action="@{/logout}" method="post">
        <button type="submit">Logout</button>
    </form>
</div>

<!-- Script para o contador -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const bodyElement = document.querySelector("body");
        const sessionTimeout = parseInt(bodyElement.getAttribute("data-session-timeout"), 10);

        let remainingTime = sessionTimeout;

        function updateCountdown() {
            if (remainingTime > 0) {
                const minutes = Math.floor(remainingTime / 60);
                const seconds = remainingTime % 60;
                document.getElementById("timeoutCountdown").textContent = `${minutes}m ${seconds}s`;
                remainingTime--;
            } else {
                document.getElementById("timeoutCountdown").textContent = "Sessão expirada!";
                window.location.href = "/logout";
            }
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();
    });
</script>
</body>
</html>
